<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="chartjs/Chart.min.js"></script>
    <script type="text/javascript" src="javascript/funcoes.js" ></script>
    <link rel="stylesheet" href="css/estilo.css">
    <script type="text/javascript">
        //possivel erro
        //var dados = "10;11;12;13;14;15;14;12;17;18;30;35;34;32;31;31;32;37;38;39";

        // Teste variavel quantidades de filho por familia
        //frequencia simples n de familias
        //var dados = "0;1;3;4;1;2;1;2;1;2;0;1;0;0;0;1;5;1;1;2;3;4";//soma de fi = 22

        //exercicio 9 pag 93
        var dados = "142;157;150;158;156;159;160;157;160;158;156;148;156;147;151;154;149;159;148;150;161;153;144;154;145;152;154;152;153;154;149;155;152;160;154;157;156;155;156;143;155;161;162;155;159;153;145;149;152;157";

        //ex  revisao 2
        //var dados = "5;8;10;7;10;14"

        //var dados = "azul;vermelho;verde;azul;vermelho;azul;amarelo;roxo"

        //var dados = "bom;medio;bom;ruim;ruim;bom;bom;medio;ruim;medio";


        //var dados = "0;0;0;0;3;0;0;0;0;3;0;0;0;0;0;2;2;2;2;2;1;1;1;1;1;1;1;1;1;1"

        //ex 25 livro disc OK
        //var dados = "1;1;1;2;2;2;2;2;6;6;6;6;2;2;2;1;1;1;1;1;1;1;2;2;2;2;2;2;2;2;2;2;2;2;2;3;3;3;3;3;5;5;5;5;5;5;5;5;5;5;3;3;3;3;3;3;3;3;3;3;2;2;2;2;2;2;2;2;2;4;4;4;4;4;4;4;4;4;4;4;4;4;4;4;4;2;2;2;2;2;3;3;3;3;3;3;3;3;3;3;2;2;2;1;1;1;1;1;1;1;1;1;1;1;1";

        //ex caderdo cont
        //var dados = "510;510;515;530;570;572;578;580;590;590;600;300;310;410;413;430;430;320;320;335;380;380;437;450;457;462;480;500;390;390";
        //var dados = "1;4;4;5;5;1;2;2;8;8;9;9;10;10;6;6;7;7;3;3";
        //revisao ex 1
        //var dados = "4;4;5;6;7;7;8;9;5;4;4;7;7;7;9;9;9;9;4;7";

        //var dados;
        var tipoVar = "CNT";   //DSC ; CNT ; ORD; NML
        var tipoPesq = "POP";      // AMS ; POP
        var nomeVar;
        var nomeFi;
        var ordem;
        var tipoSeparatriz; // Q;K;D;P
        var valorSeparatriz;
        var matriz;

        function main() {
            var form = document.getElementById("formulario");
            var valido = true//validacao(form);

            if (valido) {
                //dados = form.txtDados.value;
                dados = dados.split(";")
                //tipoVar = form.radioTipoVar.value;
                //tipoPesq = form.radioTipoPesq.value;
                nomeVar = form.txtNomeVar.value;
                nomeFi = form.txtNomeFi.value;
                //ordem = form.txtOrdem.value;
                //ordem = ordem.split(";");
                tipoSeparatriz = form.radioSepa.value;
                valorSeparatriz = form.rangeSepa.value;
            } else {
                alert("Preencha todos os campos!");
                return 0;
            }
            calcular();
        }

        function validacao(form) {
            if (form.txtDados.value == "") {
                return false;
            } else if (form.txtNomeVar.value == "") {
                return false;
            } else if (form.txtNomeFi.value == "") {
                return false;
            } else if (form.radioTipoVar.value != "ORD") {
                if (form.txtOrdem.value == "") {
                    return false;
                }
            } else {
                return true;
            }

        }

        function calcular(){

            if (tipoVar == "ORD") {
                var posicao = ordem.length-1;
                dados = ordenarQltOrd(dados,ordem,posicao);
            }else if (tipoVar == "NML") {
                dados = dados.sort();
            } else if(tipoVar == "DSC" || tipoVar == "CNT"){
                for (var i = 0; i < dados.length; i++) {
                    dados[i] = Number(dados[i]);
                }
                dados = dados.sort(ordenarQtt);
            }
            matriz = calcularFreq();

            // segunda página
            gerarTabela(matriz);
            gerarGrafico(matriz);
            if (tipoVar == "DSC" || tipoVar == "CNT") {
                var medEst = medidasEst(matriz);
                var respSeparatrizes = medSeparatrizes(matriz);
            }
        }

        function habilitarOrdem() {
            document.getElementById("txtOrdem").disabled = false;
        }

        function desabilitarOrdem() {
            document.getElementById("txtOrdem").disabled = true;
        }

        function clickQuartil(){
            var range = document.getElementById("rangeSepa");
            range.step = 25;
            range.value = 0;
        }

        function clickQuintil(){
            var range = document.getElementById("rangeSepa");
            range.step = 20;
            range.value = 0;
        }

        function clickDecil(){
            var range = document.getElementById("rangeSepa");
            range.step = 10;
            range.value = 0;
        }

        function clickPorcentil(){
            var range = document.getElementById("rangeSepa");
            range.step = 1;
            range.value = 0;
        }

        function changeSlider(){
            var form = document.getElementById("formulario");
            var range = form.rangeSepa;
            var radio = form.radioSepa;
            var label = document.getElementById('labelRange');
            var j;

            if (radio.value == "Q") {
                j = 4;
            }else if (radio.value == "K") {
                j = 5;
            }else if (radio.value == "D") {
                j = 10;
            }else if (radio.value == "P") {
                j = 100;
            }
            label.innerHTML = radio.value + ((j * range.value)/100);
        }
    </script>
    <title>Página html</title>
  </head>
  <body>
        <form id="formulario">
            <label for="txtDados">Dados</label>
            <input type="text" name="txtDados" id="txtDados">
            <br>

            <label for="txtNomeVar">Nome da Variável Pesquisada</label>
            <input type="text" name="txtNomeVar" id="txtNomeVar">
            <br>

            <label for="txtNomeFi">Nome da Fi</label>
            <input type="text" name="txtNomeFi" id="txtNomeFi">
            <br>

            <input type="radio" name="radioTipoPesq" id="pop" value="POP" onclick="" checked>
            <label for="pop">População</label>
            <input type="radio" name="radioTipoPesq" id="ams" value="AMS" onclick="" >
            <label for="ams">Amostra</label>
            <br>

            <input type="radio" name="radioTipoVar" id="QttDisc" value="DSC" onclick="desabilitarOrdem()" checked>
            <label for="QttDisc">Quantitativa Discreta</label>
            <input type="radio" name="radioTipoVar" id="QttCont" value="CNT" onclick="desabilitarOrdem()">
            <label for="QttCont">Quantitativa Contínua</label>
            <input type="radio" name="radioTipoVar" id="QltOrd" value="ORD" onclick="habilitarOrdem()">
            <label for="QltOrd">Qualitativa Ordinal</label>
            <input type="radio" name="radioTipoVar" id="QltNom" value="NML" onclick="desabilitarOrdem()">
            <label for="QltNom">Qualitativa Nominal</label>
            <br>

            <label for="txtOrdem">Ordem</label>
            <input type="text" name="txtOrdem" id="txtOrdem" disabled>
            <br>

            <input type="radio" name="radioSepa" id="quartil" value="Q" onclick="clickQuartil()" checked>
            <label for="quartil">Quartil</label>
            <input type="radio" name="radioSepa" id="quintil" value="K" onclick="clickQuintil()">
            <label for="quintil">Quintil</label>
            <input type="radio" name="radioSepa" id="decil" value="D" onclick="clickDecil()">
            <label for="decil">Decil</label>
            <input type="radio" name="radioSepa" id="porcentil" value="P" onclick="clickPorcentil()">
            <label for="porcentil">Porcentil</label>
            <br>

            <input type="range" min="0" max="100" step="25" value="0" id="rangeSepa" onchange="changeSlider()">
            <label for="rangeSepa" id="labelRange"></label>
            <br>

        <button type="button" name="btnMain" id="btnMain" onclick="main()">Calcular</button>
        </form>
        <br>
        <br>

        <div id="dTabela"></div>
        <br>
        <div class="grafh-container" style="position: relative; height:20vh; width:40vw">
            <canvas id="grafico"></canvas>
        </div>
  </body>
</html>
